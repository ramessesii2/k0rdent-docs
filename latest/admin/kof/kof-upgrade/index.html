
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for k0rdent.">
      
      
        <meta name="author" content="Mirantis, Inc.">
      
      
      
        <link rel="prev" href="../kof-kcm-region/">
      
      
        <link rel="next" href="../kof-verification/">
      
      
      <link rel="icon" href="../../../img/k0rdent-logo-mark-inverted.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Upgrading KOF - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrading-kof" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../../../img/k0rdent-logo-horizontal-inverted.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Upgrading KOF
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/k0rdent/kcm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    k0rdent/kcm
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../../../img/k0rdent-logo-horizontal-inverted.svg" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k0rdent/kcm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    k0rdent/kcm
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to the docs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    k0rdent concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            k0rdent concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/why-k0rdent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why k0rdent?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/k0rdent-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../quickstarts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    QuickStarts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            QuickStarts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstarts/quickstart-1-mgmt-node-and-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup Management Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstarts/quickstart-2-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstarts/quickstart-2-azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstarts/quickstart-2-remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy w/ SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstarts/quickstart-2-gcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to GCP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Administrator Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Administrator Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../installation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../installation/create-mgmt-clusters/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Creating the management cluster
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            Creating the management cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/create-mgmt-clusters/mgmt-create-k0s-single/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a single node k0s cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/create-mgmt-clusters/mgmt-create-k0s-multi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a multi-node k0s cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/create-mgmt-clusters/mgmt-create-eks-multi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a multinode EKS cluster
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/install-k0rdent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install k0rdent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/verify-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verify the k0rdent installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../installation/prepare-mgmt-cluster/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Prepare k0rdent to create child clusters
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2_5" id="__nav_4_2_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_5">
            <span class="md-nav__icon md-icon"></span>
            Prepare k0rdent to create child clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/prepare-mgmt-cluster/aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/prepare-mgmt-cluster/azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/prepare-mgmt-cluster/gcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GCP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/prepare-mgmt-cluster/openstack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/prepare-mgmt-cluster/vmware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VMware
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../installation/auth/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2_6" id="__nav_4_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_6">
            <span class="md-nav__icon md-icon"></span>
            Authentication
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/auth/okta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Okta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/auth/entra-id/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entra-ID
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../clusters/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Working with clusters
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Working with clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clusters/deploy-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying standalone clusters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clusters/update-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating standalone clusters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clusters/admin-adopting-clusters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adopting clusters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clusters/cluster-ipam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IP Address Management (IPAM)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clusters/migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrate ClusterDeployment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../regional-clusters/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Working with regional clusters
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Working with regional clusters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../regional-clusters/components-segregation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Regional Components Segregation Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../regional-clusters/regional-cluster-registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Register Regional Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../regional-clusters/creating-credential-in-region/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating Credential in Region
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../regional-clusters/deploying-clusters-in-region/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying Clusters in Region
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ksm/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Working with services
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Working with services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ksm/ksm-providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KSM Providers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ksm/ksm-built-in-provider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-In Provider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ksm/ksm-service-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with service templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ksm/ksm-multiclusterservice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating multi-cluster services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ksm/ksm-self-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying beach-head services on the Management Cluster itself
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../hosted-control-plane/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Hosted control planes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Hosted control planes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hosted-control-plane/hcp-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hosted-control-plane/hcp-azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hosted-control-plane/hcp-openstack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hosted-control-plane/hcp-vmware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VMware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hosted-control-plane/hcp-gcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GCP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../upgrade/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Upgrading k0rdent
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Upgrading k0rdent
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-0-2-0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v0.2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-0-3-0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v0.3.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-1-0-0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v1.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-1-1-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v1.1.1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-1-2-0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v1.2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-1-3-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v1.3.1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/upgrade-to-1-4-0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade to v1.4.0
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../access/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Access Management
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Access Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../access/credentials/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    k0rdent Credentials Management
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_2" id="__nav_4_8_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_2">
            <span class="md-nav__icon md-icon"></span>
            k0rdent Credentials Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access/credentials/credentials-process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Credentials Process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access/credentials/credentials-propagation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credential Propagation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access/credentials/cluster-identity-distribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Identity Distribution
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../access/rbac/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    k0rdent Role Based Access Control (RBAC)
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8_3" id="__nav_4_8_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_3">
            <span class="md-nav__icon md-icon"></span>
            k0rdent Role Based Access Control (RBAC)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access/rbac/what-roles-do/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What Roles Do
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access/rbac/roles-summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role Definitions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access/rbac/limiting-access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Limiting Access
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../backup/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Backup and Restore
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Backup and Restore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/prepare-backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preparing for Backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/scheduled-backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduled Management Backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/ondemand-backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Management Backup on Demand
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/whats-included/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's Included in a Backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Restoring From Backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/upgrades-rollbacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrades and Rollbacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/caveats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Caveats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backup/customization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    k0rdent Observability & FinOps
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            k0rdent Observability & FinOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing KOF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-kcm-region/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KCM Region With KOF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Upgrading KOF
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Upgrading KOF
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-backup" class="md-nav__link">
    <span class="md-ellipsis">
      Data Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup-victoria-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Backup Victoria Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-victoria-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Backup Victoria Logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-migration-to-a-new-regional-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Data migration to a new regional cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data migration to a new regional cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#migration-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Migration Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#victoria-logs-and-metrics-data-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Victoria Logs and Metrics Data Migration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-any-version" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to any version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v150" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.5.0
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Upgrade to v1.5.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-back-up-data-from-istio-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      1. Back Up Data from Istio Clusters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-clean-up-the-old-istio-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      2. Clean Up the Old Istio Clusters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-remove-the-old-istio-chart" class="md-nav__link">
    <span class="md-ellipsis">
      3. Remove the Old Istio Chart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-deploy-new-istio-release" class="md-nav__link">
    <span class="md-ellipsis">
      4. Deploy New Istio Release
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-upgrade-the-kof-version" class="md-nav__link">
    <span class="md-ellipsis">
      5. Upgrade the KOF Version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-restart-the-kof-pods" class="md-nav__link">
    <span class="md-ellipsis">
      6. Restart the KOF Pods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-resume-sveltos-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      7. Resume Sveltos Synchronization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-add-new-labels-to-clusterdeployment" class="md-nav__link">
    <span class="md-ellipsis">
      8. Add New Labels to ClusterDeployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-restore-data" class="md-nav__link">
    <span class="md-ellipsis">
      9. Restore Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v140" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.4.0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v130" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.3.0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v120" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.2.0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v110" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.1.0
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-verification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verifying the KOF installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-storing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storing KOF data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-using/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using KOF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-alerts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KOF Alerts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-scaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scaling KOF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-maintainence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maintaining KOF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kof-version-compat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Compatibility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../templatehowto/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Template How-To
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Template How-To
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templatehowto/the-templating-system-common-threads/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Templating System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templatehowto/modifying-clusterTemplates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating and Modifying Templates
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../user/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/user-create-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating clusters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../user/services/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Adding services
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Adding services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/understanding-servicetemplates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding ServiceTemplates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/add-service-to-clusterdeployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding a Service to a ClusterDeployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/beach-head/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beach Head Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/checking-status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checking Status
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/remove-beach-head/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remove Beach Head Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/service-pause/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pause Beach Head Services Reconciliation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/servicetemplate-parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ServiceTemplate Parameters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/services/service-upgrade/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading Deployed Services
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user/user-enable-drift-detection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enabling drift detection
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/crds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent CRDs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../reference/template/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    k0rdent Templates
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            k0rdent Templates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-predefined/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Removing predefined templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-byo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bring-your-own (BYO) templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for Amazon Web Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-gcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for GCP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-openstack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for OpenStack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-vsphere/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for vSphere
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/template/template-remote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for Remote SSH
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../troubleshooting/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inspecting K0rdent Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/admin-troubleshooting-aws-vpcs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS VPCs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/known-issues-eks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/known-issues-gcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GCP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/known-issues-custom-ca/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom CA Certificates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/known-issues-clusterctl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clusterctl Issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frequently Asked Questions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../appendix/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Appendix
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/appendix-extend-mgmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extended management configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/private-secure-registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy from a private secure registry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/appendix-dryrun/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding the dry run
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/appendix-providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud provider credentials management in CAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running k0rdent on ARM64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../appendix/telemetry/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Telemetry
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11_8" id="__nav_11_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_8">
            <span class="md-nav__icon md-icon"></span>
            Telemetry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/telemetry/data_collected/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Collected
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/telemetry/modes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/telemetry/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../release-notes/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12" id="__nav_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Release Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/release-notes-v1.0.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/release-notes-v1.1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1.1.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/release-notes-v1.3.1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1.3.1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/release-notes-v1.4.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1.4.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/release-notes-v1.5.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1.5.0
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../contrib/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_13" id="__nav_13_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/k0rdent-documentation-contributors-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent documentation contributor's guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/k0rdent-documentation-style-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent documentation style guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-backup" class="md-nav__link">
    <span class="md-ellipsis">
      Data Backup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup-victoria-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Backup Victoria Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-victoria-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Backup Victoria Logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-migration-to-a-new-regional-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Data migration to a new regional cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data migration to a new regional cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#migration-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Migration Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#victoria-logs-and-metrics-data-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Victoria Logs and Metrics Data Migration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-any-version" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to any version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v150" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.5.0
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Upgrade to v1.5.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-back-up-data-from-istio-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      1. Back Up Data from Istio Clusters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-clean-up-the-old-istio-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      2. Clean Up the Old Istio Clusters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-remove-the-old-istio-chart" class="md-nav__link">
    <span class="md-ellipsis">
      3. Remove the Old Istio Chart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-deploy-new-istio-release" class="md-nav__link">
    <span class="md-ellipsis">
      4. Deploy New Istio Release
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-upgrade-the-kof-version" class="md-nav__link">
    <span class="md-ellipsis">
      5. Upgrade the KOF Version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-restart-the-kof-pods" class="md-nav__link">
    <span class="md-ellipsis">
      6. Restart the KOF Pods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-resume-sveltos-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      7. Resume Sveltos Synchronization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-add-new-labels-to-clusterdeployment" class="md-nav__link">
    <span class="md-ellipsis">
      8. Add New Labels to ClusterDeployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-restore-data" class="md-nav__link">
    <span class="md-ellipsis">
      9. Restore Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v140" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.4.0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v130" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.3.0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v120" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.2.0
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-to-v110" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade to v1.1.0
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/k0rdent/docs/edit/release-v1.5.0/docs/admin/kof/kof-upgrade.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/k0rdent/docs/raw/release-v1.5.0/docs/admin/kof/kof-upgrade.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="upgrading-kof">Upgrading KOF<a class="headerlink" href="#upgrading-kof" title="Permanent link">#</a></h1>
<h2 id="data-backup">Data Backup<a class="headerlink" href="#data-backup" title="Permanent link">#</a></h2>
<p>Before migrating or upgrading, it's recommended to create a backup of your Victoria Logs and Victoria Metrics data. You can export the data from the regional cluster endpoints to local files using the following commands. Repeat the describe procedure for each of your regional cluster if needed.</p>
<ol>
<li>Lookup the regional cluster configmap named <code>kof-&lt;cluster-name&gt;</code> in the <code>kcm-system</code> namespace on the management cluster.</li>
</ol>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>cm<span class="w"> </span>kof-&lt;cluster-name&gt;<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<ol>
<li>Note the <code>read_logs_endpoint</code>, <code>read_metrics_endpoint</code>, and other endpoints values from the configmap.</li>
<li>Ensure that you have enough free disk space (e.g. check the total used size of volumes allocated to your regional cluster). Victoria Logs/Metrics usually compress the data. Commands to fetch the data compress data too, but it stores data in a JSON line format, so requires 5 times more space.</li>
<li>Ensure the connectivity to the regional cluster (e.g. do it on the Mothership cluster that surely has connectivity). If you are using Istio service mesh, consider to run a container in the Mothership cluster with attached properly sized volume in the kof namespace for connectivity to regional cluster endpoints.
Check the k0rdent <a href="../../clusters/deploy-cluster/">cluster documentation</a> to retrieve kubernetes configuration.</li>
</ol>
<h3 id="backup-victoria-metrics">Backup Victoria Metrics<a class="headerlink" href="#backup-victoria-metrics" title="Permanent link">#</a></h3>
<p>To backup all metrics data to a local file (<code>victoria-metrics-backup.gz</code>):</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip&#39;</span><span class="w"> </span>-sSN<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-u<span class="w"> </span><span class="s2">&quot;&lt;username&gt;:&lt;password&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&lt;read_metrics_endpoint&gt;/api/v1/export?reduce_mem_usage<span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;match[]={__name__!=&quot;&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&gt;<span class="w"> </span>victoria-metrics-backup.gz
</code></pre></div>
<p>To restore all metrics to a regional cluster from a local file run:</p>
<p>Without Istio servicemesh:</p>
<div class="highlight"><pre><span></span><code><span class="nv">KUBECONFIG</span><span class="o">=</span>kubeconfig<span class="w"> </span>kubectl<span class="w"> </span>port-forward<span class="w"> </span>svc/vminsert-cluster<span class="w"> </span><span class="m">8480</span>:8480<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span><span class="c1"># use kubeconfig of regional cluster to import data</span>

curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Encoding: gzip&#39;</span><span class="w"> </span>-sSX<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-T<span class="w"> </span>victoria-metrics-backup.gz<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:8480/insert/0/prometheus/api/v1/import
</code></pre></div>
<p>With Istio servicemesh:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Encoding: gzip&#39;</span><span class="w"> </span>-sSX<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-T<span class="w"> </span>victoria-metrics-backup.gz<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://&lt;CLUSTER_NAME&gt;-vminsert:8480/insert/0/prometheus/api/v1/import
</code></pre></div>
<ul>
<li>This command fetches all metrics from the old regional cluster and saves them as a gzip-compressed file.</li>
<li>You can later use this file for migration or restoration by uploading it to the new cluster.</li>
</ul>
<h3 id="backup-victoria-logs">Backup Victoria Logs<a class="headerlink" href="#backup-victoria-logs" title="Permanent link">#</a></h3>
<p>Before querying logs increase the "search.maxQueryDuration" value for the <code>kof-storage-victoria-logs-cluster-vlselect</code> deployment which is just a 30s by default and not enough to query all logs at one request.</p>
<div class="highlight"><pre><span></span><code><span class="nv">KUBECONFIG</span><span class="o">=</span>kubeconfig<span class="w"> </span>kubectl<span class="w"> </span>edit<span class="w"> </span>deployment/kof-storage-victoria-logs-cluster-vlselect<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span><span class="c1"># use kubeconfig of regional cluster to import data</span>
</code></pre></div>
<p>Edit and save the deployment spec to add <code>search.maxQueryDuration</code> argument (remove it after you finish the backup).</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--search.maxQueryDuration=24h</span>
</code></pre></div>
<p>To backup all logs data to a local file (<code>victoria-logs-backup.gz</code>):</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip&#39;</span><span class="w"> </span>-sSN<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-u<span class="w"> </span><span class="s2">&quot;&lt;username&gt;:&lt;password&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&lt;read_logs_endpoint&gt;/select/logsql/query<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;query=*&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>victoria-logs-backup.gz
</code></pre></div>
<ul>
<li>This command fetches all logs from the old regional cluster and saves them as a gzip-compressed file.</li>
<li>You can later use this file for migration or restoration by uploading it to the new cluster.</li>
</ul>
<p>To restore all logs to a regional cluster from a local file run:</p>
<p>Without Istio servicemesh:</p>
<div class="highlight"><pre><span></span><code><span class="nv">KUBECONFIG</span><span class="o">=</span>kubeconfig<span class="w"> </span>kubectl<span class="w"> </span>port-forward<span class="w"> </span>svc/kof-storage-victoria-logs-cluster-vlinsert<span class="w"> </span><span class="m">9481</span>:9481<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span><span class="c1"># use kubeconfig of regional cluster to import data</span>

curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Encoding: gzip&#39;</span><span class="w"> </span>-sSX<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-T<span class="w"> </span>victoria-logs-backup.gz<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:9481/insert/jsonline
</code></pre></div>
<p><em>N.B.</em> the default <code>write_logs_endpoint</code> ends with <code>/insert/opentelemetry/v1/logs</code>: replace it with <code>/insert/jsonline</code>.</p>
<p>With Istio servicemesh:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Encoding: gzip&#39;</span><span class="w"> </span>-sSX<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-T<span class="w"> </span>victoria-logs-backup.gz<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://&lt;CLUSTER_NAME&gt;-logs-insert:9481/insert/jsonline
</code></pre></div>
<p><strong>Notes:</strong>
- Replace <code>&lt;username&gt;:&lt;password&gt;</code>, <code>&lt;read_metrics_endpoint&gt;</code>, <code>&lt;read_logs_endpoint&gt;</code>, etc with your actual credentials and endpoints (lookup the <code>storage-vmuser-credentials</code> secret in the <code>kof</code> namespace for basic authentication credentials if you are not using Istio servicemesh)
- For chunked or filtered backups, refer to the <a href="https://docs.victoriametrics.com/victorialogs/querying/#querying-logs">official documentation</a> for available query options.
- Ensure you have sufficient disk space for the backup files.</p>
<h2 id="data-migration-to-a-new-regional-cluster">Data migration to a new regional cluster<a class="headerlink" href="#data-migration-to-a-new-regional-cluster" title="Permanent link">#</a></h2>
<p>This section describes the process for migrating data to a new KOF regional cluster, including both the cluster migration steps and the detailed procedure for migrating Victoria Logs and Metrics data.</p>
<h3 id="migration-overview">Migration Overview<a class="headerlink" href="#migration-overview" title="Permanent link">#</a></h3>
<ol>
<li><strong>Deploy a new kof-regional cluster.</strong></li>
<li><strong>Add <code>k0rdent.mirantis.com/kof-regional-cluster-name</code> label</strong> to a child ClusterDeployment to point all collectors to the new regional cluster.</li>
<li><strong>Ensure metrics and logs are available</strong> for the child cluster, confirming the new regional cluster is operational.</li>
<li><strong>Change all other child clusters</strong> from the old regional cluster to the new one.</li>
<li><strong>Start the data migration.</strong></li>
<li><strong>Ensure that the data is migrated and explorable in Grafana</strong></li>
<li><strong>Delete old kof-regional cluster</strong></li>
<li><strong>Remove the label from child ClusterDeployments.</strong></li>
</ol>
<h3 id="victoria-logs-and-metrics-data-migration">Victoria Logs and Metrics Data Migration<a class="headerlink" href="#victoria-logs-and-metrics-data-migration" title="Permanent link">#</a></h3>
<p>Follow these steps to migrate Victoria Logs and Metrics data from the old regional cluster to the new one:</p>
<ol>
<li><strong>Lookup the old regional cluster configmap</strong> named <code>kof-&lt;cluster-name&gt;</code> in the <code>kcm-system</code> namespace on the management cluster.</li>
<li><strong>Note the <code>read_logs_endpoint</code> and <code>read_metrics_endpoint</code> values</strong> from the configmap.</li>
<li><strong>Authentication and Service Mesh:</strong><ul>
<li>If <strong>not using Istio servicemesh</strong>:<ul>
<li>Lookup the <code>storage-vmuser-credentials</code> secret in the <code>kof</code> namespace for basic authentication credentials.</li>
</ul>
</li>
<li>If <strong>using Istio servicemesh</strong>:<ul>
<li>Copy the <code>istio-remote-secret-&lt;cluster-name&gt;</code> secret from the old regional cluster to the new regional cluster to enable Istio endpoints discovery.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Prepare a migration environment</strong> on the new regional cluster:
    <div class="highlight"><pre><span></span><code><span class="nv">KUBECONFIG</span><span class="o">=</span>regional-kubeconfig<span class="w"> </span>kubectl<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="o">=</span>alpine:latest<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span>migration<span class="w"> </span>--<span class="w"> </span>sh

apk<span class="w"> </span>update
apk<span class="w"> </span>add<span class="w"> </span>curl<span class="w"> </span>pv
</code></pre></div></li>
<li>
<p><strong>Migrate metrics data</strong> by running the following command (replace placeholders as needed):
    <div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip&#39;</span><span class="w"> </span>-sSN<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-u<span class="w"> </span><span class="s2">&quot;&lt;username&gt;:&lt;password&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&lt;read_metrics_endpoint&gt;/api/v1/export?reduce_mem_usage<span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;match[]={__name__!=&quot;&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>pv<span class="w"> </span><span class="p">|</span><span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Encoding: gzip&#39;</span><span class="w"> </span>-sSX<span class="w"> </span>POST<span class="w"> </span>-T<span class="w"> </span>-<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://vminsert-cluster.kof:8480/insert/0/prometheus/api/v1/import
</code></pre></div></p>
<p>Check <a href="https://docs.victoriametrics.com/victoriametrics/url-examples/#apiv1export">VictoriaMetrics API</a> for more details.</p>
<p>The query fetches all metrics from the old regional cluster endpoint. If you need to split migration by chunks, please refer the documentation for <code>match[]</code> filter available options (by metric name, time range, etc)</p>
<p>Reset vmselect cache after the migration:
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-I<span class="w"> </span>http://vmselect-cluster.kof:8481/internal/resetRollupResultCache
</code></pre></div></p>
</li>
<li>
<p><strong>Migrate logs data</strong> by running the following command (replace placeholders as needed):
    <div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip&#39;</span><span class="w"> </span>-sSN<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-u<span class="w"> </span><span class="s2">&quot;&lt;username&gt;:&lt;password&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&lt;read_logs_endpoint&gt;/select/logsql/query<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;query=*&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>pv<span class="w"> </span><span class="p">|</span><span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Encoding: gzip&#39;</span><span class="w"> </span>-sSX<span class="w"> </span>POST<span class="w"> </span>-T<span class="w"> </span>-<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://kof-storage-victoria-logs-cluster-vlinsert.kof:9481/insert/jsonline
</code></pre></div></p>
<p>Check <a href="https://docs.victoriametrics.com/victorialogs/faq/#how-to-export-logs-from-victorialogs">VictoriaLogs FAQ</a> for more details.</p>
<p>The query fetches all logs from the old regional cluster endpoint. If you need to split migration by chunks, please refer the documentation for <code>logsql</code> query filter available options (by stream name, time range, etc)</p>
</li>
</ol>
<p>To migrate data with transformation please consider one of the following options:</p>
<ul>
<li>Backup data to a file with a JSON line format, change each json, restore the file to a new cluster</li>
<li>Use the <a href="https://github.com/k0rdent/kof/tree/main/scripts/victoria-migration">Python script</a> with your custom transformation function</li>
</ul>
<p><strong>Explanation of curl parameters:</strong></p>
<ul>
<li><code>-H 'Accept-Encoding: gzip'</code>: Requests gzip-compressed response to reduce bandwidth.</li>
<li><code>-sS</code>: Silent mode. Hides progress, shows error messages.</li>
<li><code>-N</code>: Disables output buffering, streaming data as it arrives.</li>
<li><code>-u "&lt;username&gt;:&lt;password&gt;"</code>: Specifies basic authentication credentials (not needed for Istio)</li>
<li><code>-d 'match[]={__name__!=""}'</code>: Sends POST data to filter all metrics.</li>
<li><code>| pv</code>: Pipes output through <code>pv</code> to monitor progress.</li>
<li>Second <code>curl</code>:</li>
<li><code>-H 'Content-Encoding: gzip'</code>: Informs the server that the data is gzip-compressed.</li>
<li><code>-X POST</code>: Uses HTTP POST method.</li>
<li><code>-T -</code>: Reads data from stdin (the pipe) and uploads it.</li>
</ul>
<p><strong>Notes:</strong> Ensure you have the correct credentials and endpoints for your environment. Adjust the commands as necessary for your authentication method and network setup.</p>
<h2 id="upgrade-to-any-version">Upgrade to any version<a class="headerlink" href="#upgrade-to-any-version" title="Permanent link">#</a></h2>
<ul>
<li>Create a backup of each KOF chart values in each cluster, for example:
    <div class="highlight"><pre><span></span><code><span class="c1"># Management cluster uses default KUBECONFIG=&quot;&quot;</span>
<span class="k">for</span><span class="w"> </span>cluster<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span>regional-kubeconfig<span class="w"> </span>child-kubeconfig<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span>namespace<span class="w"> </span><span class="k">in</span><span class="w"> </span>kof<span class="w"> </span>istio-system<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>chart<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$cluster</span><span class="w"> </span>helm<span class="w"> </span>list<span class="w"> </span>-qn<span class="w"> </span><span class="nv">$namespace</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">      </span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$cluster</span><span class="w"> </span>helm<span class="w"> </span>get<span class="w"> </span>values<span class="w"> </span>-n<span class="w"> </span><span class="nv">$namespace</span><span class="w"> </span><span class="nv">$chart</span><span class="w"> </span>-o<span class="w"> </span>yaml<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>&gt;<span class="w"> </span>values-<span class="nv">$cluster</span>-<span class="nv">$chart</span>.bak
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">done</span>
<span class="k">done</span>
ls<span class="w"> </span>values-*.bak
</code></pre></div></li>
<li>Ideally, <a href="../../backup/">create a backup</a> of everything including VictoriaMetrics/Logs data volumes.</li>
<li>Open the latest version of the <a href="../kof-install/">Installing KOF</a> guide.</li>
<li>Make sure you see the expected new version in the top navigation bar.</li>
<li>Apply the guide step by step, but:<ul>
<li>Skip unchanged credentials like <code>external-dns-aws-credentials</code>.</li>
<li>Before applying new YAML files, verify what has changed, for example:
    <div class="highlight"><pre><span></span><code>diff<span class="w"> </span>-u<span class="w"> </span>values--kof-mothership.bak<span class="w"> </span>mothership-values.yaml
</code></pre></div></li>
<li>Run all <code>helm upgrade</code> commands with the new <code>--version</code> and files as documented.</li>
</ul>
</li>
<li>Do the same for other <a href="../#guides">KOF guides</a>.</li>
<li>Apply each relevant "Upgrade to" section of this page from older to newer.<ul>
<li>For example, if you're upgrading from v1.1.0 to v1.3.0,</li>
<li>first apply the <a href="#upgrade-to-v120">Upgrade to v1.2.0</a> section,</li>
<li>then apply the <a href="#upgrade-to-v130">Upgrade to v1.3.0</a> section.</li>
</ul>
</li>
</ul>
<h2 id="upgrade-to-v150">Upgrade to v1.5.0<a class="headerlink" href="#upgrade-to-v150" title="Permanent link">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>
To use the new <a href="../../regional-clusters/">KCM Regional Clusters</a> with KOF, please apply the <a href="../kof-kcm-region/">KCM Region With KOF</a> guide on top of the steps below.</p>
</div>
<p><strong>Important!!!</strong></p>
<div class="admonition notice">
<p class="admonition-title">Notice</p>
<p>
This is for users of <strong>kof-istio</strong> only.</p>
</div>
<p>Starting from the <strong>v1.5.0</strong> release, Istio has been moved to a separate repository, which changes the installation and upgrade process. Upgrading KOF <strong>will trigger a complete uninstallation</strong> of all components across Istio clusters. To prevent data loss and ensure a smooth migration, you must carefully follow the steps in the given order. Again, the steps below are only required if any Istio clusters were deployed.</p>
<h3 id="1-back-up-data-from-istio-clusters">1. Back Up Data from Istio Clusters<a class="headerlink" href="#1-back-up-data-from-istio-clusters" title="Permanent link">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>
Perform all backup steps in this section <strong>for each Istio cluster</strong> individually. Each cluster must have its own backup before proceeding with the upgrade.</p>
</div>
<h4 id="create-a-persistentvolumeclaim">Create a PersistentVolumeClaim<a class="headerlink" href="#create-a-persistentvolumeclaim" title="Permanent link">#</a></h4>
<p>Create a <code>PersistentVolumeClaim</code> named <code>backup-pvc</code> on the management cluster:</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">kubectl apply -f - &lt;&lt;EOF</span>
<span class="l l-Scalar l-Scalar-Plain">apiVersion</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PersistentVolumeClaim</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-pvc</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kof</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">accessModes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">    </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span><span class="w"> </span><span class="c1"># Adjust according to your data size</span>
<span class="w">  </span><span class="nt">storageClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">standard</span>
<span class="l l-Scalar l-Scalar-Plain">EOF</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>
To estimate how much storage you need for the backup, open the <a href="../kof-using/#access-to-the-kof-ui">kof-ui</a>, navigate to the <code>VictoriaMetrics/Logs</code> section, and click the <code>VictoriaMetrics storage</code> pod name on the cluster you want to back up. Find the <code>Data Size</code> metric and multiply this value by at least two (or by at least five for VictoriaLogs). This is because the metric shows data compressed using the VictoriaMetrics algorithm, while the backup will be stored in a simple gzip format, which does not compress as efficiently.</p>
</div>
<h4 id="create-a-backup-pod-with-curl">Create a Backup Pod with <code>curl</code><a class="headerlink" href="#create-a-backup-pod-with-curl" title="Permanent link">#</a></h4>
<p>Deploy a temporary pod for performing backups on the management cluster:</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">kubectl apply -f - &lt;&lt;EOF</span>
<span class="l l-Scalar l-Scalar-Plain">apiVersion</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-deployment</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kof</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-deployment</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-deployment</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">curlimages/curl:latest</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;/bin/sleep&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;infinity&quot;</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/curl_user</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-volume</span>
<span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-volume</span>
<span class="w">        </span><span class="nt">persistentVolumeClaim</span><span class="p">:</span>
<span class="w">          </span><span class="nt">claimName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup-pvc</span>
<span class="l l-Scalar l-Scalar-Plain">EOF</span>
</code></pre></div>
<h4 id="retrieve-cluster-endpoints">Retrieve Cluster Endpoints<a class="headerlink" href="#retrieve-cluster-endpoints" title="Permanent link">#</a></h4>
<p>Locate the regional cluster <code>ConfigMap</code> named <code>kof-&lt;cluster-name&gt;</code> in the <code>kcm-system</code> namespace of the management cluster.</p>
<p>Record the following endpoint values:</p>
<ul>
<li>read_logs_endpoint</li>
<li>read_metrics_endpoint</li>
</ul>
<h4 id="connect-to-the-backup-pod">Connect to the Backup Pod<a class="headerlink" href="#connect-to-the-backup-pod" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span>&lt;BACKUP_DEPLOYMENT_POD_NAME&gt;<span class="w"> </span>--<span class="w"> </span>/bin/sh
</code></pre></div>
<h4 id="back-up-victoriametricslogs-data">Back Up VictoriaMetrics/Logs Data<a class="headerlink" href="#back-up-victoriametricslogs-data" title="Permanent link">#</a></h4>
<p>For instructions on creating backups of VictoriaMetrics and log data, refer to the <a href="#data-backup">Data Backup</a> section.</p>
<h4 id="optional-download-backups-locally">(Optional) Download Backups Locally<a class="headerlink" href="#optional-download-backups-locally" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>cp<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span>&lt;BACKUP_DEPLOYMENT_POD_NAME&gt;:victoria-metrics-backup.gz<span class="w"> </span>./victoria-metrics-backup.gz
kubectl<span class="w"> </span>cp<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span>&lt;BACKUP_DEPLOYMENT_POD_NAME&gt;:victoria-logs-backup.gz<span class="w"> </span>./victoria-logs-backup.gz
</code></pre></div>
<h3 id="2-clean-up-the-old-istio-clusters">2. Clean Up the Old Istio Clusters<a class="headerlink" href="#2-clean-up-the-old-istio-clusters" title="Permanent link">#</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>
Ensure that both <code>VictoriaMetrics</code> and <code>VictoriaLogs</code> backup files have been successfully created and verified before the cluster cleanup.</p>
</div>
<h4 id="pause-synchronization-on-managed-clusters">Pause Synchronization on Managed Clusters<a class="headerlink" href="#pause-synchronization-on-managed-clusters" title="Permanent link">#</a></h4>
<p>Before starting the cleanup, execute the following command on the management cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>scale<span class="w"> </span>--replicas<span class="o">=</span><span class="m">0</span><span class="w"> </span>deployment/addon-controller<span class="w"> </span>-n<span class="w"> </span>projectsveltos
</code></pre></div>
<p>This command temporarily pauses synchronization between the management cluster and all managed clusters. It ensures that no old configurations are applied during the cleanup process.</p>
<h4 id="cleanup-old-kof-components">Cleanup Old KOF Components<a class="headerlink" href="#cleanup-old-kof-components" title="Permanent link">#</a></h4>
<p>Use the <code>kof-nuke.bash</code> script (located in the <code>kof/script</code> directory) to completely remove all old <code>kof</code> resources from the remote cluster.</p>
<p>Run the script for each <strong>regional</strong> and <strong>child</strong> cluster, for example:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>regional-kubeconfig<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ls<span class="w"> </span><span class="nv">$KUBECONFIG</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>scripts/kof-nuke.bash
</code></pre></div>
<p>Cleanup typically takes 15 minutes, depending on the cluster size and network speed.</p>
<h4 id="cleanup-old-istio-components">Cleanup Old Istio Components<a class="headerlink" href="#cleanup-old-istio-components" title="Permanent link">#</a></h4>
<p>Remove old Istio components for each <strong>regional</strong> and <strong>child</strong> cluster</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>regional-kubeconfig

helm<span class="w"> </span>uninstall<span class="w"> </span>--wait<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>kof-istio-gateway
helm<span class="w"> </span>uninstall<span class="w"> </span>--wait<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>kof-istio
helm<span class="w"> </span>uninstall<span class="w"> </span>--wait<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>cert-manager
kubectl<span class="w"> </span>delete<span class="w"> </span>namespace<span class="w"> </span>istio-system<span class="w"> </span>--wait
kubectl<span class="w"> </span>get<span class="w"> </span>crd<span class="w"> </span>-o<span class="w"> </span>name<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>--color<span class="o">=</span>never<span class="w"> </span><span class="s1">&#39;istio.io&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>kubectl<span class="w"> </span>delete
</code></pre></div>
<p>Once the cleanup of all regional and child clusters is complete,
run <code>unset KUBECONFIG</code> to use the <strong>management</strong> cluster in the next steps.</p>
<h3 id="3-remove-the-old-istio-chart">3. Remove the Old Istio Chart<a class="headerlink" href="#3-remove-the-old-istio-chart" title="Permanent link">#</a></h3>
<p>Remove the old Istio release and related resources from the management cluster:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>un<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>kof-istio
kubectl<span class="w"> </span>delete<span class="w"> </span>namespace<span class="w"> </span>istio-system<span class="w"> </span>--wait
kubectl<span class="w"> </span>get<span class="w"> </span>crd<span class="w"> </span>-o<span class="w"> </span>name<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>--color<span class="o">=</span>never<span class="w"> </span><span class="s1">&#39;istio.io&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>kubectl<span class="w"> </span>delete
</code></pre></div>
<h3 id="4-deploy-new-istio-release">4. Deploy New Istio Release<a class="headerlink" href="#4-deploy-new-istio-release" title="Permanent link">#</a></h3>
<p>Install the new Istio release to the management cluster.</p>
<h4 id="install-the-k0rdent-istio-base-chart">Install the <code>k0rdent-istio-base</code> Chart<a class="headerlink" href="#install-the-k0rdent-istio-base-chart" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>-i<span class="w"> </span>--wait<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--create-namespace<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>k0rdent-istio-base<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>cert-manager-service-template.enabled<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="nv">injectionNamespaces</span><span class="o">=</span><span class="s2">&quot;{kof}&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>oci://ghcr.io/k0rdent/istio/charts/k0rdent-istio-base<span class="w"> </span>--version<span class="w"> </span><span class="m">0</span>.1.0
</code></pre></div>
<p><strong>Notes:</strong></p>
<ul>
<li><code>cert-manager-service-template.enabled=false</code> disables the deployment of the cert-manager service template. It should already be deployed as part of KOF.</li>
<li><code>injectionNamespaces="{kof}"</code> ensures Istio sidecars are injected only into the <code>kof</code> namespace. To inject sidecars into additional namespaces, list them comma-separated: <code>{kof,&lt;YOUR_NAMESPACE&gt;}</code>.</li>
</ul>
<h4 id="install-the-k0rdent-istio-chart">Install the <code>k0rdent-istio</code> Chart<a class="headerlink" href="#install-the-k0rdent-istio-chart" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>-i<span class="w"> </span>--wait<span class="w"> </span>-n<span class="w"> </span>istio-system<span class="w"> </span>k0rdent-istio<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>cert-manager-service-template.enabled<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="s2">&quot;istiod.meshConfig.extensionProviders[0].name=otel-tracing&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="s2">&quot;istiod.meshConfig.extensionProviders[0].opentelemetry.port=4317&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span><span class="s2">&quot;istiod.meshConfig.extensionProviders[0].opentelemetry.service=kof-collectors-daemon-collector.kof.svc.cluster.local&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>oci://ghcr.io/k0rdent/istio/charts/k0rdent-istio<span class="w"> </span>--version<span class="w"> </span><span class="m">0</span>.1.0
</code></pre></div>
<h3 id="5-upgrade-the-kof-version">5. Upgrade the KOF Version<a class="headerlink" href="#5-upgrade-the-kof-version" title="Permanent link">#</a></h3>
<p>Upgrade KOF to the target version following standard upgrade procedures.</p>
<h3 id="6-restart-the-kof-pods">6. Restart the KOF Pods<a class="headerlink" href="#6-restart-the-kof-pods" title="Permanent link">#</a></h3>
<p>You must restart the KOF pods on the management cluster to update the <code>istio-proxy</code> sidecar. Without restarting, you may encounter connection errors or Istio pod crashes.</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>pod<span class="w"> </span>--all<span class="w"> </span>-n<span class="w"> </span>kof
</code></pre></div>
<p><strong>Notes:</strong></p>
<ul>
<li>If you have additional namespaces with Istio sidecar injection, make sure to restart pods in those namespaces as well.</li>
<li>Restarting ensures all pods run with the updated Istio configuration and sidecar versions.</li>
</ul>
<h3 id="7-resume-sveltos-synchronization">7. Resume Sveltos Synchronization<a class="headerlink" href="#7-resume-sveltos-synchronization" title="Permanent link">#</a></h3>
<p>Resume synchronization between the management cluster and all managed (regional and child) clusters.</p>
<p>Run the following command on the management cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>scale<span class="w"> </span>--replicas<span class="o">=</span><span class="m">1</span><span class="w"> </span>deployment/addon-controller<span class="w"> </span>-n<span class="w"> </span>projectsveltos
</code></pre></div>
<h3 id="8-add-new-labels-to-clusterdeployment">8. Add New Labels to ClusterDeployment<a class="headerlink" href="#8-add-new-labels-to-clusterdeployment" title="Permanent link">#</a></h3>
<p>To enable Istio on your clusters, you need to add two new labels to the corresponding ClusterDeployment resources.</p>
<ul>
<li><code>k0rdent.mirantis.com/istio-role: member</code> - Apply this label to lustersDeployment where Istio should be installed.</li>
<li><code>k0rdent.mirantis.com/istio-gateway: "true"</code> - Apply this label only to regional clusters to install Istio gateway.</li>
</ul>
<h3 id="9-restore-data">9. Restore Data<a class="headerlink" href="#9-restore-data" title="Permanent link">#</a></h3>
<p>Use the backup created in step 2 to restore VictoriaMetrics and VictoriaLogs data.</p>
<h4 id="connect-to-the-backup-pod_1">Connect to the Backup Pod<a class="headerlink" href="#connect-to-the-backup-pod_1" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span>&lt;BACKUP_DEPLOYMENT_POD_NAME&gt;<span class="w"> </span>--<span class="w"> </span>/bin/sh
</code></pre></div>
<h4 id="restore-victoriametricslogs-data">Restore VictoriaMetrics/Logs Data<a class="headerlink" href="#restore-victoriametricslogs-data" title="Permanent link">#</a></h4>
<p>Follow the restore steps in the <a href="#data-backup">Data Backup</a> section to import backups into VM/VL.</p>
<h2 id="upgrade-to-v140">Upgrade to v1.4.0<a class="headerlink" href="#upgrade-to-v140" title="Permanent link">#</a></h2>
<ul>
<li><code>PromxyServerGroup</code> CRD was moved from the <code>crds/</code> directory to the <code>templates/</code> directory for auto-upgrade.</li>
<li>Please use <code>--take-ownership</code> on upgrade of <code>kof-mothership</code> to 1.4.0:
    <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--take-ownership<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--reset-values<span class="w"> </span>--wait<span class="w"> </span>-n<span class="w"> </span>kof<span class="w"> </span>kof-mothership<span class="w"> </span>-f<span class="w"> </span>mothership-values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>oci://ghcr.io/k0rdent/kof/charts/kof-mothership<span class="w"> </span>--version<span class="w"> </span><span class="m">1</span>.4.0
</code></pre></div></li>
<li>This will not be required in future upgrades.</li>
</ul>
<h2 id="upgrade-to-v130">Upgrade to v1.3.0<a class="headerlink" href="#upgrade-to-v130" title="Permanent link">#</a></h2>
<p>Before upgrading any helm chart:</p>
<ul>
<li>
<p>If you have customized <a href="https://github.com/k0rdent/kof/blob/v1.2.1/charts/kof-mothership/values.yaml#L169">VMCluster or VMAlert resources</a>
    then update your resources accordingly to the <a href="https://github.com/k0rdent/kof/blob/v1.3.0/charts/kof-mothership/values.yaml#L167">new values under "spec"</a>.</p>
</li>
<li>
<p>If you have customized VMCluster/VMAlert resources using the "k0rdent.mirantis.com/kof-storage-values" cluster annotation, then keep the old but put new values first to reconcile the new <code>ClusterDeployment</code> configuration on the current release, <strong>then</strong> run the helm charts upgrade. After regional clusters have the new <code>kof-storage</code> helm chart installed, you can remove old values from the cluster annotation.</p>
</li>
<li>
<p>If you have set <code>storage</code> values of the <code>kof-regional</code> chart, update them in the same way.</p>
</li>
<li>
<p>If you are not using <a href="../kof-install/#istio">Istio</a>,
    then on the step 8 of the <a href="../kof-install/#management-cluster">Management Cluster</a> upgrade
    please apply this temporary workaround for the <a href="https://github.com/k0rdent/kcm/issues/1914">Reconciling MultiClusterService</a> issue:
    <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>deploy/kcm-controller-manager
</code></pre></div></p>
</li>
</ul>
<h2 id="upgrade-to-v120">Upgrade to v1.2.0<a class="headerlink" href="#upgrade-to-v120" title="Permanent link">#</a></h2>
<ul>
<li>As part of the KOF 1.2.0 overhaul of metrics collection and representation, we switched from the <a href="https://github.com/VictoriaMetrics/helm-charts/tree/master/charts/victoria-metrics-k8s-stack">victoria-metrics-k8s-stack</a> metrics and dashboards to <a href="https://github.com/open-telemetry/opentelemetry-helm-charts/tree/main/charts/opentelemetry-kube-stack">opentelemetry-kube-stack</a> metrics and <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> dashboards.</li>
<li>Some of the previously collected metrics have slightly different labels.</li>
<li>If consistency of timeseries labeling is important, users are advised to conduct relabeling of the corresponding timeseries in the metric storage by running a retroactive relabeling procedure of their preference.</li>
<li>A possible reference solution here would be to use <a href="https://victoriametrics.com/blog/rules-replay/">Rules backfilling via vmalert</a>.</li>
<li>The labels that would require renaming are these:<ul>
<li>Replace <code>job="integrations/kubernetes/kubelet"</code> with <code>job="kubelet", metrics_path="/metrics"</code>.</li>
<li>Replace <code>job="integrations/kubernetes/cadvisor"</code> with <code>job="kubelet", metrics_path="/metrics/cadvisor"</code>.</li>
<li>Replace <code>job="prometheus-node-exporter"</code> with <code>job="node-exporter"</code>.</li>
</ul>
</li>
</ul>
<p>Also:</p>
<ul>
<li>To upgrade from <code>cert-manager-1-16-4</code> to <code>cert-manager-v1-16-4</code>
    please apply this patch to management cluster:
    <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: k0rdent.mirantis.com/v1beta1</span>
<span class="s">kind: ServiceTemplateChain</span>
<span class="s">metadata:</span>
<span class="s">  name: patch-cert-manager-v1-16-4-from-1-16-4</span>
<span class="s">  namespace: kcm-system</span>
<span class="s">  annotations:</span>
<span class="s">    helm.sh/resource-policy: keep</span>
<span class="s">spec:</span>
<span class="s">  supportedTemplates:</span>
<span class="s">    - name: cert-manager-v1-16-4</span>
<span class="s">    - name: cert-manager-1-16-4</span>
<span class="s">      availableUpgrades:</span>
<span class="s">        - name: cert-manager-v1-16-4</span>
<span class="s">EOF</span>
</code></pre></div></li>
</ul>
<hr />
<h2 id="upgrade-to-v110">Upgrade to v1.1.0<a class="headerlink" href="#upgrade-to-v110" title="Permanent link">#</a></h2>
<ul>
<li>After you <code>helm upgrade</code> the <code>kof-mothership</code> chart, please run the following:
    <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>--server-side<span class="w"> </span>--force-conflicts<span class="w"> </span><span class="se">\</span>
-f<span class="w"> </span>https://github.com/grafana/grafana-operator/releases/download/v5.18.0/crds.yaml
</code></pre></div></li>
<li>After you get <code>regional-kubeconfig</code> file on the <a href="../kof-verification/">KOF Verification</a> step,
  please run the following for each regional cluster:
    <div class="highlight"><pre><span></span><code><span class="nv">KUBECONFIG</span><span class="o">=</span>regional-kubeconfig<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>--server-side<span class="w"> </span>--force-conflicts<span class="w"> </span><span class="se">\</span>
-f<span class="w"> </span>https://github.com/grafana/grafana-operator/releases/download/v5.18.0/crds.yaml
</code></pre></div></li>
<li>This is noted as required in the <a href="https://github.com/grafana/grafana-operator/releases/tag/v5.18.0">grafana-operator release notes</a>.</li>
</ul>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c.67 0 1.32.12 1.94.33L13 9.35l-4 5zM16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35l-1-7 4.5-5-2.65-5.08C13.87 3.47 15.17 3 16.5 3"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/k0rdent/docs/issues/new" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 The k0rdent authors | Documentation distributed under <a href="https://creativecommons.org/licenses/by/4.0/legalcode.txt">CC-BY-4.0</a>.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k0rdent/kcm" target="_blank" rel="noopener" title="k0rdent on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://x.com/k0rdent" target="_blank" rel="noopener" title="k0rdent on X" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://bsky.app/profile/k0rdent.bsky.social" target="_blank" rel="noopener" title="k0rdent on BlueSky" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/channel/UChXQ6kbvjnAtdZAQpl7Fo4A" target="_blank" rel="noopener" title="k0rdent on YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/k0rdent/" target="_blank" rel="noopener" title="k0rdent on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.autohide", "search.suggest", "search.highlight", "content.code.copy", "navigation.tracking", "toc.follow", "search.suggest", "search.highlight", "content.action.edit", "content.action.view", "navigation.path", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../javascripts/feedback.js"></script>
      
        <script src="../../../javascripts/plausible.js"></script>
      
    
  </body>
</html>